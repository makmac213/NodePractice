<!DOCTYPE html>
<html>
<head>
	<title>Node</title>
	<link rel="stylesheet" href="css/style.css" />
	<script src="js/test.js"></script>
</head>
<body>

	<div id="ajaxField"></div>
	<div>
		<!--<input id="myUsername" type="text" value="User1" />-->
		<input id="myMessage" type="text" value="Your message here" />
		<input id="mySendButton" type="button" value="Send" />
	</div>
	<div id="status"></div>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
	<script>
		function update(){
			$.ajax({
				url:'http://localhost:8888/update',
				type: 'GET',
				success: function(data){
					$('#ajaxField').html(decodeURIComponent(data));
				}
			});
		}

		$('document').ready(function(){
			setInterval('update()',1000);
		});

		$('#mySendButton').click(function(){
			$.ajax({
				url:'http://localhost:8888/sendMessage',
				type: 'GET',
				data: $('#myMessage').val(),
				success: function(data){
					$('#myMessage').focus();
					$('#status').html('<small>Message Sent</small>');
				},
				error: function(data){
					$('#myMessage').focus();
					$('#status').html('<small>Retry</small>').fadeOut(5000);
				}
			});			
		});
	</script>
</body>
</html>
